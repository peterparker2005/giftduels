syntax = "proto3";

package giftduels.payment.v1;

import "giftduels/payment/v1/payment.proto";
import "giftduels/shared/v1/common.proto";

option go_package = "github.com/peterparker2005/giftduels/packages/protobuf-go/gen/giftduels/payment/v1;paymentv1";

// Invoice payload structure that gets encoded into base64 for telegram bot
message InvoicePayload {
  InvoicePurpose purpose = 1;
  // depending on purpose, one of these fields is used:
  oneof data {
    StarsDeposit stars_deposit = 10;
    CommissionChargeStars commission_charge_stars = 11;
  }
}

// universal event of new invoice appearance.
message InvoicePaymentEvent {
  string invoice_id = 1;
  shared.v1.TelegramUserId telegram_user_id = 2;
  InvoicePurpose purpose = 3;
  // depending on purpose, one of these fields is used:
  oneof details {
    StarsDeposit stars_deposit = 10;
    CommissionChargeStars commission_charge_stars = 11;
  }
  // raw useful field, can store Original InvoicePayload
  bytes raw_payload_bytes = 20;
}
